<!--yml
category: 未分类
date: 0001-01-01 00:00:00
--->

# 710.请 谈 谈 volatile 有 什 么 特 点 ， 为 什 么 它 能 保 证 变 量 对 所 有 线 程 的 可 见 性

> 原文：[https://zwmst.com/4623.html](https://zwmst.com/4623.html)

   [ *并发编程面试专栏* ](https://zwmst.com/%e5%b9%b6%e5%8f%91%e7%bc%96%e7%a8%8b%e9%9d%a2%e8%af%95%e4%b8%93%e6%a0%8f)*[ <time datetime="2021-10-09T23:49:34+08:00"> 2021-10-09 </time> ](https://zwmst.com/4623.html)  关 键 字 volatile 是 Java 虚 拟 机 提 供 的 最 轻 量 级 的 同 步 机 制 。 当 一 个 变 量 被 定 义 成 volatile 之 后 ， 具 备 两 种 特 性 ：

1.  保 证 此 变 量 对 所 有 线 程 的 可 见 性 。 当 一 条 线 程 修 改 了 这 个 变 量 的 值 ， 新 值 对 于 其 他 线 程 是 可 以 立 即 得 知 的 。 而 普 通 变 量 做 不 到 这 一 点 。
2.  禁 止 指 令 重 排 序 优 化 。 普 通 变 量 仅 仅 能 保 证 在 该 方 法 执 行 过 程 中 ， 得 到正 确 结 果 ， 但 是 不 保 证 程 序 代 码 的 执 行 顺 序 。

<!--yml
category: 未分类
date: 0001-01-01 00:00:00
--->

# Java 的 内 存 模 型 定 义 了 8 种 内 存 间 操 作 ：

## lock 和 unlock

1.  把 一 个 变 量 标 识 为 一 条 线 程 独 占 的 状 态 。
2.  把 一 个 处 于 锁 定 状 态 的 变 量 释 放 出 来 ， 释 放 之 后 的 变 量 才 能 被 其 他 线 程 锁 定 。

## read 和 write

1.  把 一 个 变 量 值 从 主 内 存 传 输 到 线 程 的 工 作 内 存 ， 以 便 load。
2.  把 store 操 作 从 工 作 内 存 得 到 的 变 量 的 值 ， 放 入 主 内 存 的 变 量 中 。

## load 和 store

1.  把 read 操 作 从 主 内 存 得 到 的 变 量 值 放 入 工 作 内 存 的 变 量 副 本 中 。
2.  把 工 作 内 存 的 变 量 值 传 送 到 主 内 存 ， 以 便 write。

## use 和 assgin

1.  把 工 作 内 存 变 量 值 传 递 给 执 行 引 擎 。
2.  将 执 行 引 擎 值 传 递 给 工 作 内 存 变 量 值 。

volatile 的 实 现 基 于 这 8 种 内 存 间 操 作 ， 保 证 了 一 个 线 程 对 某 个 volatile 变 量 的 修 改 ， 一 定 会 被 另 一 个 线 程 看 见 ， 即 保 证 了 可 见 性 。*