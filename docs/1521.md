<!--yml
category: 未分类
date: 0001-01-01 00:00:00
--->

# 168\. CAS（比较并交换-乐观锁机制-锁自旋）概念及特性

> 原文：[https://zwmst.com/3271.html](https://zwmst.com/3271.html)

   [ *多线程* ](https://zwmst.com/%e5%a4%9a%e7%ba%bf%e7%a8%8b)*[ <time datetime="2021-09-18T00:46:23+08:00"> 2021-09-17 </time> ](https://zwmst.com/3271.html)  CAS（Compare And Swap/Set）比较并交换，CAS 算法的过程是这样：它包含 3 个参数CAS(V,E,N)。**V 表示要更新的变量(内存值)，E 表示预期值(旧的)，N 表示新值。当且仅当 V 值等于 E 值时，才会将 V 的值设为 N，如果 V 值和 E 值不同，则说明已经有其他线程做了更新，则当前线程什么都不做。最后，CAS 返回当前 V 的真实值**。
CAS 操作是抱着乐观的态度进行的(乐观锁)，它总是认为自己可以成功完成操作。**当多个线程同时使用 CAS 操作一个变量时，只有一个会胜出，并成功更新，其余均会失败。失败的线程不会被挂起，仅是被告知失败，并且允许再次尝试，当然也允许失败的线程放弃操作**。基于这样的原理，CAS 操作即使没有锁，也可以发现其他线程对当前线程的干扰，并进行恰当的处理。*