<!--yml
category: 未分类
date: 0001-01-01 00:00:00
-->

# 缓存失效？缓存穿透？缓存雪崩？缓存并发？

> 原文：[https://zwmst.com/790.html](https://zwmst.com/790.html)

   [ *Redis* ](https://zwmst.com/redis)*[ <time datetime="2021-08-14T08:10:11+08:00"> 2021-08-14 </time> ](https://zwmst.com/790.html)  1.  缓存失效 缓存失效指的是大量的缓存在同一时间失效，到时DB的瞬间压力飙升。造成这种现象的 原因是，key的过期时间都设置成一样了。解决方案是，key的过期时间引入随机因素， 比如5分钟+随机秒这种方式。

2.  缓存穿透 缓存穿透是指查询一条数据库和缓存都没有的一条数据，就会一直查询数据库，对数据 库的访问压力就会增大，缓存穿透的解决方案，有以下2种： 缓存空对象：代码维护较简单，但是效果不好。 布隆过滤器：代码维护复杂，效果很好。

3.  缓存雪崩 缓存雪崩 是指在某一个时间段，缓存集中过期失效。此刻无数的请求直接绕开缓存，直 接请求数据库。 造成缓存雪崩的原因，有以下2种： reids宕机。 大部分数据失效。

对于缓存雪崩的解决方案有以下2种：

搭建高可用的集群，防止单机的redis宕机。

设置不同的过期时间，防止同意之间内大量的key失效。

4.  缓存并发 有时候如果网站并发访问高，一个缓存如果失效，可能出现多个进程同时查询DB，同时 设置缓存的情况，如果并发确实很大，这也可能造成DB压力过大，还有缓存频繁更新的 问题。 一般处理方案是在查DB的时候进行加锁，如果KEY不存在，就加锁，然后查DB入缓存， 然后解锁；其他进程如果发现有锁就等待，然后等解锁后再查缓存或者进入DB查询。*