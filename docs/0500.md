<!--yml
category: 未分类
date: 0001-01-01 00:00:00
--->

# 分布式系统的接口幂等性设计

> 原文：[https://zwmst.com/978.html](https://zwmst.com/978.html)

   [ *分布式* ](https://zwmst.com/%e5%88%86%e5%b8%83%e5%bc%8f)*[ <time datetime="2021-08-14T09:52:55+08:00"> 2021-08-14 </time> ](https://zwmst.com/978.html)  唯一id。每次操作，都根据操作和内容生成唯一的id，在执行之前先判断id是否存在，如果不 存在则执行后续操作，并且保存到数据库或者redis等。

服务端提供发送token的接口，业务调用接口前先获取token,然后调用业务接口请求时，把 token携带过去,务器判断token是否存在redis中，存在表示第一次请求，可以继续执行业务， 执行业务完成后，最后需要把redis中的token删除建去重表。

将业务中有唯一标识的字段保存到去重表，如果表中存在，则表示已经处理过了 版本控制。增加版本号，当版本号符合时，才能更新数据 状态控制。

例如订单有状态已支付 未支付 支付中 支付失败，当处于未支付的时候才允许修改为支付中等*