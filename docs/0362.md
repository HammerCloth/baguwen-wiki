<!--yml
category: 未分类
date: 0001-01-01 00:00:00
--->

# 主键使用自增ID还是UUID?

> 原文：[https://zwmst.com/689.html](https://zwmst.com/689.html)

   [ *MySQL* ](https://zwmst.com/mysql)*[ <time datetime="2021-08-14T07:55:09+08:00"> 2021-08-13 </time> ](https://zwmst.com/689.html)  推荐使用自增ID,不要使用UUID.

因为在InnoDB存储引擎中,主键索引是作为聚簇索引存在的,也就是说,主键索引的B+树叶子节 点上存储了主键索引以及全部的数据(按照顺序),如果主键索引是自增ID,那么只需要不断向后 排列即可,如果是UUID,由于到来的ID与原来的大小不确定,会造成非常多的数据插入,数据移动, 然后导致产生很多的内存碎片,进而造成插入性能的下降.

总之,在数据量大一些的情况下,用自增主键性能会好一些.

*图片来源于《高性能MySQL》: 其中默认后缀为使用自增ID,_uuid为使用UUID为主键的测 试,测试了插入100w行和300w行的性能

![image-20210813174937500](img/4db1267a4fb54b37c600e2ff7f290544.png)

关于主键是聚簇索引,如果没有主键,InnoDB会选择一个唯一键来作为聚簇索引,如果没有唯一 键,会生成一个隐式的主键。*