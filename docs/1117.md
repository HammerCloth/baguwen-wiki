<!--yml
category: 未分类
date: 0001-01-01 00:00:00
-->

# Redis 的持久化机制是什么？各自的优缺点？

> 原文：[https://zwmst.com/2320.html](https://zwmst.com/2320.html)

   [ *Redis* ](https://zwmst.com/redis)*[ <time datetime="2021-08-23T09:46:25+08:00"> 2021-08-23 </time> ](https://zwmst.com/2320.html)  **Redis 提供两种持久化机制 RDB 和 AOF 机制:**

## 1、RDBRedis DataBase)持久化方式：

是指用数据集快照的方式半持久化模式)记录 redis 数据库的所有键值对,在某个时间点将数据写入一个临时文件，持久化结束后，用这个临时文件替换上次持久化的文件，达到数据恢复。
**优点：**

*   （1） 只有一个文件 dump.rdb，方便持久化。
*   （2） 容灾性好，一个文件可以保存到安全的磁盘。
*   （3） 性能最大化，fork 子进程来完成写操作，让主进程继续处理命令，所以是 IO 最大化。使用单独子进程来进行持久化，主进程不会进行任何 IO 操 作，保证了 redis 的高性能)
*   （4） 相对于数据集大时，比 AOF 的启动效率更高。

**缺点：**
数据安全性低。RDB 是间隔一段时间进行持久化，如果持久化之间 redis 发生故障，会发生数据丢失。所以这种方式更适合数据要求不严谨的时候

## 2、AOFAppend-only file)持久化方式：

是指所有的命令行记录以 redis 命令请求协议的格式完全持久化存储)保存为 aof 文件。
**优点：**

*   （1） 数据安全，aof 持久化可以配置 appendfsync 属性，有 always，每进行一次命令操作就记录到 aof 文件中一次。
*   （2） 通过 append 模式写文件，即使中途服务器宕机，可以通过 redis- check-aof 工具解决数据一致性问题。
*   （3） AOF 机制的 rewrite 模式。AOF 文件没被 rewrite 之前（文件过大时会对命令进行合并重写），可以删除其中的某些命令（比如误操作的 flushall）)
    **缺点：**
*   （1） AOF 文件比 RDB 文件大，且恢复速度慢。
*   （2） 数据集大的时候，比 rdb 启动效率低。*