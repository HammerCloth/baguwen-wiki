<!--yml
category: 未分类
date: 0001-01-01 00:00:00
--->

# 473.存储过程优化思路

> 原文：[https://zwmst.com/4023.html](https://zwmst.com/4023.html)

   [ *数据库* ](https://zwmst.com/%e6%95%b0%e6%8d%ae%e5%ba%93)*[ <time datetime="2021-09-25T02:21:10+08:00"> 2021-09-24 </time> ](https://zwmst.com/4023.html)  1.  尽量利用一些 sql 语句来替代一些小循环，例如聚合函数，求平均函数等。
2.  中间结果存放于临时表，加索引。
3.  少使用游标。sql 是个集合语言，对于集合运算具有较高性能。而 cursors 是过程运算。比如对一个 100 万行的数据进行查询。游标需要读表 100 万次，而不使用游标则只需要少量几次读取。
4.  事务越短越好。sqlserver 支持并发操作。如果事务过多过长，或者隔离级别过高，都会造成并发操作的阻塞，死锁。导致查询极慢，cpu 占用率极地。
5.  使用 try-catch 处理错误异常。
6.  查找语句尽量不要放在循环内。*