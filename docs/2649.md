<!--yml
category: 未分类
date: 0001-01-01 00:00:00
--->

# 1248.缓存与数据库不一致怎么办

> 原文：[https://zwmst.com/5805.html](https://zwmst.com/5805.html)

   [ *Redis* ](https://zwmst.com/redis)*[ <time datetime="2021-11-01T00:44:55+08:00"> 2021-10-31 </time> ](https://zwmst.com/5805.html)  假设采用的主存分离，读写分离的数据库，

如果一个线程 A 先删除缓存数据，然后将数据写入到主库当中，这个时候，主库和从库同步没有完成，线程 B 从缓存当中读取数据失败，从从库当中读取到旧数据，然后更新至缓存，这个时候，缓存当中的就是旧的数据。

发生上述不一致的原因在于，主从库数据不一致问题，加入了缓存之后，主从不一致的时间被拉长了

处理思路：
在从库有数据更新之后，将缓存当中的数据也同时进行更新，即当从库发生了数据更新之后，向缓存发出删除，淘汰这段时间写入的旧数据。*