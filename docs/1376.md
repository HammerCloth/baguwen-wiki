<!--yml
category: 未分类
date: 0001-01-01 00:00:00
--->

# 31.CMS 收集器（多线程标记清除算法）

> 原文：[https://zwmst.com/2901.html](https://zwmst.com/2901.html)

   [ *Java虚拟机* ](https://zwmst.com/java%e8%99%9a%e6%8b%9f%e6%9c%ba)*[ <time datetime="2021-09-14T00:35:22+08:00"> 2021-09-13 </time> ](https://zwmst.com/2901.html)  Concurrent mark sweep(CMS)收集器是一种年老代垃圾收集器，其最主要目标是获取最短垃圾回收停顿时间，和其他年老代使用标记-整理算法不同，它使用多线程的标记-清除算法。最短的垃圾收集停顿时间可以为交互比较高的程序提高用户体验。CMS 工作机制相比其他的垃圾收集器来说更复杂，整个过程分为以下 4 个阶段：

1.  初始标记
    只是标记一下 GC Roots 能直接关联的对象，速度很快，仍然需要暂停所有的工作线程。

2.  并发标记
    进行 GC Roots 跟踪的过程，和用户线程一起工作，不需要暂停工作线程。

3.  重新标记
    为了修正在并发标记期间，因用户程序继续运行而导致标记产生变动的那一部分对象的标记记录，仍然需要暂停所有的工作线程。

4.  并发清除
    清除 GC Roots 不可达对象，和用户线程一起工作，不需要暂停工作线程。由于耗时最长的并发标记和并发清除过程中，垃圾收集线程可以和用户现在一起并发工作，所以总体上来看CMS 收集器的内存回收和用户线程是一起并发地执行。*